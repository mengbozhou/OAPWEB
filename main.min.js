(function () {
	if (!requirejs) return;
	sessionStorage.setItem('firstAccessUrl', location.href);
    requirejs.config({
        // By default load any module IDs from js/lib
        urlArgs: "v=" + (new Date).getTime(),
		//urlArgs : "v=1.231",
        baseUrl: './js',

        paths: {
            // mobiscroll_date: './lib/mobiscroll_date',
            // mobiscroll: './lib/mobiscroll',
            // mui: './lib/mui.min',
            // picker: './lib/mui.picker.min',
        	config: './lib/config.min',
        	mjsdk: './lib/mjsdk-1.4.3.min',
            common: './lib/common.min',
            zhCn: "./lib/zh_cn.min",
            file: "./lib/file.min",
            jquery: './lib/jquery-2.1.4.min',
            extend: './lib/jq.extend.min',
            touch: './lib/jquery.touch.min',
            iscroll: "./lib/iscroll-5.1.3.min",
            security: "./lib/security.min",
            underscore: "./lib/underscore.min",
            backbone: "./lib/backbone.min",
            localstorage: "./lib/localStorage.min",
            text: 'lib/text',
            areadata1:'./lib/LAreaData1',
            areadata:'./lib/LAreaData.min',
            areamain:'./lib/LArea',
            swiper:"./lib/swiper-3.4.0.jquery.min",
            wx:"https://res.wx.qq.com/open/js/jweixin-1.2.0",
            qrcode:'./lib/qrcode'
        },
        shim: {
        	"areamain":{
        		deps: ['jquery','areadata'],
                exports: 'areamain'
        	},
            // "mobiscroll":{
            //     deps: ['jquery','mobiscroll_date'],
            //     exports: 'mobiscroll'
            // },
            // "picker":{
            //     deps: ['jquery','mui'],
            //     exports: 'picker'
            // },
            "underscore": {
                exports: '_'
            },
            "backbone": {
                deps: ['underscore', 'jquery'],
                exports: 'Backbone'
            },
            "localstorage": {
                deps: ['backbone'],
                exports: 'Store'
            },
            "extend": {
                deps: ["jquery", "touch"],
                exports: 'extend'
            },
            "common": {
                deps: ["jquery", "extend"],
                exports: 'common'
            },
            "touch": {
                deps: ["jquery"],
                exports: 'touch'
            },
            "swiper":{
            	deps: ["jquery"],
            	exports:'swiper'
            }

        },
        waitSeconds: 30

    });
    // Start the main app logic.
    require(['backbone', 'underscore','config','jquery', 'touch', "extend", "router"],
        function () {
    	    // 开始监控url变化
            Backbone.history.start({
             }); 
            // });
        });

    requirejs.onError = function (err) {
        console.log(err.requireType);
        if (err.requireType === 'timeout') {
            console.log('modules: ' + err.requireModules);
        }
        console.info(err);
    };

})(this);